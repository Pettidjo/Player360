{"version":3,"sources":["reducers/index.js","reducers/playerReducers.js","actions/types.js","actions/index.js","components/Header.js","components/Player360.js","components/App.js","index.js","config/keys.js"],"names":["combineReducers","player360","state","arguments","length","undefined","action","type","payload","fetchApiPlayer","_ref","Object","asyncToGenerator","regenerator_default","a","mark","_callee","dispatch","res","wrap","_context","prev","next","axios","method","url","concat","keys","ref","headers","Accept","Content-Type","cache-control","x-api-key","apikey","sent","data","stop","this","_x","apply","style","header","backgroundColor","logo","marginLeft","Radium","react_default","createElement","className","href","wrapperPlayer360","position","width","height","overflowX","overflowY","paddingTop","display","wrapperScroll360","zIndex","cursor","wrapperImage","Player360","props","_this","classCallCheck","possibleConstructorReturn","getPrototypeOf","call","mouseIsDown","e","elem","ReactDOM","findDOMNode","refs","scrollingElement","setState","isDown","startX","pageX","offsetLeft","scrollLeft","scrollTop","mouseUp","mouseLeave","mouseMove","preventDefault","walkX","getImages","views","view3d","originals","viewsURL","map","view","zIndexImage","id","viewToRender","handleScroll","limit","Math","max","scrollWidth","offsetWidth","nbImg","nImg","round","_this2","addEventListener","_this3","removeEventListener","prevProps","_this4","react","onScroll","key","src","Component","App","style_root","components_Header","components_Player360","outsidePanorama","connect","find","actions","store","createStore","reducers","composeWithDevTools","applyMiddleware","ReduxThunk","render","react_redux_es","components_App","document","getElementById","module","exports"],"mappings":"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","file":"static/js/main.7f0ab59c.chunk.js","sourcesContent":["import { combineReducers } from 'redux';\n\nimport playerReducers from './playerReducers';\n\nexport default combineReducers({\n  player360: playerReducers\n});","import { FETCH_API_PLAYER } from '../actions/types';\n\nexport default function(state = null, action) {\n  switch (action.type) {\n    case FETCH_API_PLAYER:\n      return action.payload;\n    default:\n      return state;\n  }\n} ","export const FETCH_API_PLAYER = 'fetch_api_player';","import axios from 'axios';\nimport keys from '../config/keys';\nimport { FETCH_API_PLAYER } from './types';\n\nconst URL_STAMPYT = 'https://api.stampyt.io/rec'\n\nexport const fetchApiPlayer = () => async dispatch => {\n  const res = await axios({\n    method: 'get',\n    url: `${URL_STAMPYT}/panorama-shootings?ref=${keys.ref}`,\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'cache-control': 'no-cache',\n      'x-api-key': keys.apikey\n    }\n  });\n\n  dispatch({ type: FETCH_API_PLAYER, payload: res.data });\n}","import React from 'react';\nimport Radium from 'radium';\n\nconst style = {\n  header: {\n    backgroundColor: '#222222'\n  },\n  logo: {\n    marginLeft: '20px'\n  }\n}\n\nconst Header = () => {\n  return(\n    <nav style={style.header}>\n      <div className=\"nav-wrapper\">\n        <a href=\"/\" style={style.logo} className=\"brand-logo\">Player 360</a>\n        <ul className=\"right\">\n          <li><a href=\"/\">Home</a></li>\n        </ul>\n      </div>\n    </nav>\n  )\n}\n\nexport default Radium(Header);","import React, { Component, Fragment } from 'react';\nimport ReactDOM from 'react-dom';\nimport Radium from 'radium';\nimport { map } from 'lodash';\n\nconst width = 600;\n\nconst style = {\n  wrapperPlayer360: {\n    position: 'relative',\n    width: width + 'px',\n    height: '476px',\n    overflowX: 'auto',\n    overflowY: 'hidden',\n    marginLeft: '24px',\n    paddingTop: '24px',\n    display: 'block',\n  },\n  wrapperScroll360: {\n    width: width * 2 + 'px',\n    backgroundColor: 'transparent',\n    height: '450px',\n    display: 'flex',\n    overflowX: 'scroll',\n    position: 'absolute',\n    zIndex: '1000',\n    cursor: 'grab'\n  },\n  wrapperImage: {\n    position: 'fixed',\n    width: '600px',\n  },\n}\n\nclass Player360 extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      views: null,\n      viewToRender: 0,\n      isDown: false,\n      startX: 0,\n      scrollLeft: 0,\n      scrollTop: 0\n    }\n  }\n\n  componentDidMount() {\n    const elem = ReactDOM.findDOMNode(this.refs.scrollingElement);\n    \n    elem.addEventListener('scroll', this.handleScroll);\n    elem.addEventListener('mousedown', e => this.mouseIsDown(e));  \n    elem.addEventListener('mouseup', e => this.mouseUp(e))\n    elem.addEventListener('mouseleave', e => this.mouseLeave(e));\n    elem.addEventListener('mousemove', e => this.mouseMove(e));\n  }\n\n  componentWillUnmount() {\n    const elem = ReactDOM.findDOMNode(this.refs.scrollingElement);\n    elem.removeEventListener('scroll', this.handleScroll);    elem.addEventListener('scroll', this.handleScroll);\n    elem.removeEventListener('mousedown', e => this.mouseIsDown(e));  \n    elem.removeEventListener('mouseup', e => this.mouseUp(e))\n    elem.removeEventListener('mouseleave', e => this.mouseLeave(e));\n    elem.removeEventListener('mousemove', e => this.mouseMove(e));\n  }\n\n  componentDidUpdate(prevProps) {\n    if (this.props.view3d !== prevProps.view3d) {\n      this.getImages();\n    }\n  }\n\n  mouseIsDown = (e) => {\n    const elem = ReactDOM.findDOMNode(this.refs.scrollingElement);\n\n    this.setState({isDown: true});\n    this.setState({startX: e.pageX - elem.offsetLeft});\n    this.setState({scrollLeft: elem.scrollLeft});\n    this.setState({scrollTop: elem.scrollTop}); \n  }\n  mouseUp = (e) => {\n    this.setState({isDown: false});\n  }\n  mouseLeave = (e) => {\n    this.setState({isDown: false});\n  }\n  mouseMove = (e) => {\n    const elem = ReactDOM.findDOMNode(this.refs.scrollingElement);\n\n    if(this.state.isDown){\n      e.preventDefault();\n  \n      const x = e.pageX - elem.offsetLeft;\n      const walkX = x - this.state.startX;\n      elem.scrollLeft = this.state.scrollLeft - walkX;\n    }\n  }\n\n  getImages = () => {\n    const views = (this.props.view3d && this.props.view3d.originals) || null\n    const viewsURL = map(views, view => view.url);\n    \n    this.setState({views: viewsURL});\n  }\n\n  zIndexImage = (id) => {\n    return {\n      zIndex: this.state.viewToRender === id ? 10 : 1 \n    }\n  }\n\n  handleScroll = () => {\n    const elem = ReactDOM.findDOMNode(this.refs.scrollingElement);\n    const limit = Math.max(elem.scrollWidth, elem.offsetWidth) / 2;\n    const nbImg = this.state.views.length - 1;\n    const nImg = Math.round(elem.scrollLeft / (limit / nbImg));\n\n    this.setState({ viewToRender: nImg })\n  }\n\n  render() {\n    return (\n      <div id=\"wrapperPlayer360\" ref='scrollingElement' style={style.wrapperPlayer360}>\n      {this.state.views &&\n        <Fragment>\n          <div id=\"scrolledDiv\" onScroll={this.handleScroll} style={style.wrapperScroll360}></div>\n          { map(this.state.views, (view, id) => <img key={id} src={view} style={[style.wrapperImage, this.zIndexImage(id)]} />) }\n        </Fragment>\n      }\n      </div>\n    )\n  }\n}\n\nexport default Radium(Player360);\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport * as actions from '../actions';\nimport { find } from 'lodash';\nimport Radium,{StyleRoot} from 'radium';\n\n// Components\nimport Header from './Header';\nimport Player360 from './Player360';\n\nclass App extends Component {\n  componentDidMount() {\n    this.props.fetchApiPlayer();\n  }\n\n  render() {\n    return (\n      <StyleRoot>   \n        <div>\n          <Header />\n          <Player360 view3d={this.props.outsidePanorama} />\n        </div>\n      </StyleRoot>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    outsidePanorama: find(state.player360, (view) => view.type === 'PANORAMA_OUTSIDE_CLOSE')\n  }\n}\n\nexport default Radium(connect(mapStateToProps, actions)(App));\n","import 'materialize-css/dist/css/materialize.min.css';\nimport './index.css';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport ReduxThunk from 'redux-thunk';\nimport { Provider } from 'react-redux';\nimport { createStore, applyMiddleware } from 'redux';\nimport { composeWithDevTools } from 'redux-devtools-extension';\n\n// Reducers\nimport reducers from './reducers';\n\n// Components\nimport App from './components/App';\n\nconst store = createStore(reducers, {}, composeWithDevTools(applyMiddleware(ReduxThunk)));\n\nReactDOM.render(\n  <Provider store={store}><App /></Provider>,\n  document.getElementById('root')\n);\n","module.exports = {\n  apikey:'HuFH9GhNuf9Qzbq2qc8aJ9gr6bxKrVpO2O8Sdorc',\n  ref:'BA38CE37EED05A6797AD039F9A1DD8C903C9686C6E7EF88F833A11E78ABAFACFC6A09A03721EDBD4CD5A11F37B87113284B1977F83FF422E8F1C00DE82BBEDAE'\n}"],"sourceRoot":""}